(()=>{"use strict";var t={cards:[],likedCardsId:[],page:0,limit:10,logMode:!1},e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";t.logMode&&(console.log(e),console.log(t))},r=function(e){var r=t.cards.find((function(t){return t.id==e}));return void 0!==r&&r},n=function(t,e){var r=Array.from(e.childNodes).find((function(e){return e.id==t}));return void 0!==r&&r},o={baseUrl:"https://api.thecatapi.com/v1/",headers:{"x-api-key":"live_sHTJFxrUksyPzxBgrAtRU2t5aiCqI4ZN9SZBwwoDQ7IgmUCwKTh9xdTyaTmHY3HO","Content-Type":"application/json"}},i=function(t){return t.ok?t.json():Promise.reject(t.status)},a=function(t,e,r){var n=t.querySelector(".card").cloneNode(!0),o=n.querySelector(".card__image"),i=n.querySelector(".card__like-button");return n.id=e.id,o.src=e.url,o.setAttribute("alt","Котик"),e.like&&n.classList.add("like"),i.addEventListener("click",(function(){return r(e.id)})),n},c=new CustomEvent("activeTab",{detail:{tabId:""},bubbles:!0,cancelable:!0,composed:!1});function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,s(n.key),n)}}function s(t){var e=function(t,e){if("object"!=l(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==l(e)?e:e+""}var f,d,y=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},e=[{key:"update",value:function(t,e){Array.isArray(e)?localStorage.setItem(t,e.join(this.separator)):localStorage.setItem(t,e)}},{key:"append",value:function(t,e){var r=localStorage[t]?localStorage[t]+",":"";Array.isArray(e)?localStorage.setItem(t,r+e.join(this.separator)):localStorage.setItem(t,r+e)}},{key:"get",value:function(t){return localStorage[t]?localStorage[t].split(this.separator):[]}},{key:"removeItem",value:function(t,e){if(localStorage[t]){var r=localStorage[t].split(this.separator);if(r.includes(e)){var n=r.findIndex((function(t){return t===e}));r.splice(n,1)}this.update(t,r)}}},{key:"clear",value:function(){localStorage.clear()}}],null&&u(t.prototype,null),e&&u(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function p(t){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}function v(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function b(t,e,r){var n;return n=function(t,e){if("object"!=p(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(e),(e="symbol"==p(n)?n:n+"")in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}f=y,(d=s(d="separator"))in f?Object.defineProperty(f,d,{value:",",enumerable:!0,configurable:!0,writable:!0}):f[d]=",";var m=document.querySelector("#card-template").content,g=document.querySelector("#allCats .gallary__list"),h=document.querySelector("#favouriteCats .gallary__list"),S=document.querySelectorAll(".tab"),k=document.querySelectorAll(".nav__button"),j=function(t){return h.prepend(t)},O=function(t){return g.append(t)},w=function(r){!function(r,n){t.likedCardsId.splice(t.likedCardsId.indexOf(r),1),e("stateLikeDeleteById")}(r);var o=n(r,h);o&&o.remove(o)};function P(o){var i=document.querySelector('[id="'.concat(o,'"]'));i.classList.toggle("like"),function(r,n){e("stateCardLikeStatusToggle"),t.cards.find((function(t){return t.id==r})).like^=!0}(i.id),i.classList.contains("like")?function(o){!function(r,n){!t.likedCardsId.includes(r)&&(t.likedCardsId.push(r),e("stateLikePush"))}(o),!n(o,h)&&j(a(m,r(o),P))}(o):w(o)}k.forEach((function(t){return t.addEventListener("click",(function(t){return function(t,e,r){if(!t.classList.contains("active")){var n=t.getAttribute("data-tab");e.forEach((function(e){return e==t?e.classList.add("active"):e.classList.remove("active")})),r.forEach((function(t){return t.id==n?t.classList.add("active"):t.classList.remove("active")})),c.detail.tabId=n,document.dispatchEvent(c)}}(t.target,k,S)}))})),function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return fetch("".concat(o.baseUrl,"images/search?limit=").concat(t,"&page=").concat(e),{method:"GET",headers:o.headers}).then(i)}(t.limit,t.page).then((function(n){n.forEach((function(n){var o;r(n.id)||(o=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?v(Object(r),!0).forEach((function(e){b(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({like:!1},n),!t.cards.includes(o)&&(t.cards.push(o),e("stateCardPush")),O(a(m,n,P)))}))}));var E=function(t){r(t.id)||!n(t.id,g)&&O(a(m,t,P))};document.addEventListener("activeTab",(function(e){var o;switch(e.detail.tabId){case"allCats":t.cards.forEach(E);break;case"favouriteCats":o=[],t.likedCardsId.forEach((function(t){var e=r(t);e&&o.push(a(m,e,P))})),o.forEach((function(t){!n(t.id,h)&&j(t)}))}}))})();